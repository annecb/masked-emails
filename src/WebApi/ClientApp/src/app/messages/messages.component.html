<div *ngIf="dataLoaded">
  <mat-sidenav-container class="inbox-mails-container">

    <mat-sidenav-content class="mails-content">
      <div class="header-container">
      </div>

      <div class="table-view table-container">
        <table mat-table [dataSource]="dataSource">
          <ng-container matColumnDef="received" class="mat-column-receivedUtc">
            <th mat-header-cell *matHeaderCellDef> Received </th>
            <td mat-cell *matCellDef="let message"> {{message.receivedUtc| date:'short'}} </td>
          </ng-container>

          <ng-container matColumnDef="sender" class="mat-column-sender">
            <th mat-header-cell *matHeaderCellDef> Sender </th>
            <td mat-cell *matCellDef="let message"> {{message.sender.address}} </td>
          </ng-container>

          <ng-container matColumnDef="subject" class="mat-column-subject">
            <th mat-header-cell *matHeaderCellDef> Subject </th>
            <td mat-cell *matCellDef="let message"> {{message.subject}} </td>
          </ng-container>

          <ng-container matColumnDef="actions" class="mat-column-actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let message">
              <button mat-icon-button aria-label="Show inbox message" (click)="showMessage(message)">
                <fa-icon [icon]="['fas', 'eye']"></fa-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"
              [ngClass]="{'highlight': selectedRowIndex == row.id}" (click)="highlight(row)"></tr>
        </table>
      </div>
    </mat-sidenav-content>

    <mat-sidenav class="message-content" #sidenav mode="side" [(opened)]="opened" (opened)="events.push('open!')" position="end"
                 (closed)="events.push('close!')">
      <div class="message-content-padding">
        <div class="message-header">
          <div class="section">
            <h2 class="item-position message-title text-color">{{messageContent.subject}}</h2>
            <button mat-icon-button color="primary" aria-label="Close" (click)="closeMessageContent()" class="large">
              <fa-icon [icon]="['fas', 'times']"></fa-icon>
            </button>
          </div>
          <div class="section">
            <span class="item-position text-color">From: {{messageContent.sender.address}}</span><span>{{messageContent.receivedUtc| date:'short'}}</span>
          </div>
        </div>
        <div class="content-section" *ngIf="!loadingMessage">
          <div class="padding-content text-color" [innerHTML]="getMessageBody()"></div>
        </div>

        <div class="loader-position" *ngIf="loadingMessage">
          <mat-spinner [diameter]="30"></mat-spinner>
        </div>

      </div>
    </mat-sidenav>
    <!--Responsive Table view-->
    <!--<div class="mobile-view">
          <table mat-table [dataSource]="dataSource" multiTemplateDataRows>
            <ng-container matColumnDef="received" class="mat-column-receivedUtc">
              <td mat-cell *matCellDef="let message">
                <div class="received-position"><span class="received">{{ message.receivedUtc
            }}</span>
    </div>
              </td>
            </ng-container>

            <ng-container matColumnDef="sender" class="mat-column-sender">
              <td mat-cell *matCellDef="let message">
                <div class="sender-position"><span class="received">{{ message.sender.address }}</span></div>
              </td>
            </ng-container>

            <ng-container matColumnDef="subject" class="mat-column-subject">
              <td mat-cell *matCellDef="let message">
                <div class="subject-position"><span class="subject">{{ message.subject }}</span></div>
              </td>
            </ng-container>

            <ng-container matColumnDef="actions" class="mat-column-actions">
              <td mat-cell *matCellDef="let message">
                <div class="actions-position">
                  <button class="icon-float" mat-icon-button aria-label="Show inbox message" (click)="$event.stopPropagation();showMessage(message)"><fa-icon [icon]="['fas', 'eye']"></fa-icon></button>
                </div>
              </td>
            </ng-container>

            <tr mat-row *matRowDef="let element; columns: mobileColumnsToDisplay;" class="element-row"> </tr>
          </table>

        </div>-->

  </mat-sidenav-container>
</div>
